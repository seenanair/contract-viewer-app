{"ast":null,"code":"import _slicedToArray from\"/Users/seenanair/Desktop/CCDC_Demo/ccdc-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{InfoBox}from\"../Components/InfoBox/InfoBox\";import{Table}from\"../Components/Table/Table\";import Aux from\"../hoc/Aux\";import{useFetch}from\"../hooks/useFetch\";import classes from\"./DataBuilder.module.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var DataBuilder=function DataBuilder(){var _React$useState=React.useState(0),_React$useState2=_slicedToArray(_React$useState,2),selectedDataIndex=_React$useState2[0],setSelectedDataIndex=_React$useState2[1];//Custom hook to fetch data\nvar _useFetch=useFetch(\"https://api.test.datacite.org/dois?query=prefix:10.5517\"),data=_useFetch.data,loading=_useFetch.loading,error=_useFetch.error;var getData=function getData(data){if(data&&data.data&&data.data.length>0)return data.data;else return[];};var ccdData=React.useMemo(function(){return getData(data);},[data]);//Create table structure \nvar prepareSummaryTableColumns=function prepareSummaryTableColumns(){return[{Header:function Header(){return\"Summary\";},id:\"axes-header\",columns:[\"id\",\"title\"].map(function(th,idx){return{Header:idx===0?th.toUpperCase():th.charAt(0).toUpperCase()+th.slice(1),accessor:th};})}];};//Fomat data to display as summary   \nvar formatSummaryData=function formatSummaryData(data){return data.map(function(entry){return{id:entry.id,title:entry.attributes.titles[0].title};});};//Format data to display as content\nvar formatContentData=function formatContentData(data){return{\"Publication Year\":data[selectedDataIndex].attributes.publicationYear,Publisher:data[selectedDataIndex].attributes.publisher,Subjects:data[selectedDataIndex].attributes.subjects.map(function(val){return val[\"subject\"];}),URL:data[selectedDataIndex].attributes.url};};//Create content\nvar prepareContent=function prepareContent(data){if(selectedDataIndex>=0){var formattedData=formatContentData(data);var detailsArray=[];for(var _i=0,_Object$entries=Object.entries(formattedData);_i<_Object$entries.length;_i++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i],2),k=_Object$entries$_i[0],v=_Object$entries$_i[1];detailsArray.push([k,v]);}return/*#__PURE__*/_jsx(\"ul\",{children:detailsArray.map(function(row,indx){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[row[0],\" \"]}),/*#__PURE__*/_jsx(\"ul\",{children:Array.isArray(row[1])?row[1].map(function(val){return/*#__PURE__*/_jsx(\"li\",{children:val});}):indx===detailsArray.length-1?/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:row[1],children:row[1]})}):/*#__PURE__*/_jsx(\"li\",{children:row[1]})})]});})});}else return\"\";};//Handle selection in summary table   \nvar handleTableRowClick=function handleTableRowClick(indx){setSelectedDataIndex(indx);};return/*#__PURE__*/_jsx(Aux,{children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.ContainerText,children:\"Loading\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.Loader})]}):ccdData.length>0?Object.keys(error).length!==0?/*#__PURE__*/_jsx(\"div\",{children:\" Error while fetching data\"}):/*#__PURE__*/_jsxs(\"div\",{className:classes.Conatiner,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.Left,children:/*#__PURE__*/_jsx(Table,{columns:prepareSummaryTableColumns(),data:formatSummaryData(ccdData),selectedRow:0,pageIndexValue:0,pageSizeValue:20,onRowClick:handleTableRowClick})}),/*#__PURE__*/_jsx(\"div\",{className:classes.Right,children:/*#__PURE__*/_jsx(InfoBox,{title:\"Details\",children:prepareContent(ccdData)})})]}):\"\"});};","map":{"version":3,"sources":["/Users/seenanair/Desktop/CCDC_Demo/ccdc-app/src/DataBuilder/DataBuilder.tsx"],"names":["React","InfoBox","Table","Aux","useFetch","classes","DataBuilder","useState","selectedDataIndex","setSelectedDataIndex","data","loading","error","getData","length","ccdData","useMemo","prepareSummaryTableColumns","Header","id","columns","map","th","idx","toUpperCase","charAt","slice","accessor","formatSummaryData","entry","title","attributes","titles","formatContentData","publicationYear","Publisher","publisher","Subjects","subjects","val","URL","url","prepareContent","formattedData","detailsArray","Object","entries","k","v","push","row","indx","Array","isArray","handleTableRowClick","ContainerText","Loader","keys","Conatiner","Left","Right"],"mappings":"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","sourcesContent":["\n\nimport React from \"react\";\nimport { InfoBox } from \"../Components/InfoBox/InfoBox\";\nimport { Table } from \"../Components/Table/Table\";\nimport Aux from \"../hoc/Aux\";\nimport { useFetch } from \"../hooks/useFetch\";\nimport classes from \"./DataBuilder.module.css\"\n\n\nexport const DataBuilder = () => {\n\n  const [selectedDataIndex,setSelectedDataIndex] = React.useState(0);\n\n  //Custom hook to fetch data\n  const {data,loading,error} =   useFetch(`https://api.test.datacite.org/dois?query=prefix:10.5517`);\n\n  \n  const getData = (data:any) : [] => {\n    if(data && data.data && data.data.length>0)\n      return data.data;\n    else\n      return [];  \n  }\n\n  const ccdData = React.useMemo(() => getData(data),[data]);\n\n  //Create table structure \n  const prepareSummaryTableColumns = () => {\n        return [\n          {\n            Header: () => \"Summary\",\n            id: \"axes-header\",\n            columns: [\"id\", \"title\"].map((th, idx) => {\n              return {\n                Header: idx===0?th.toUpperCase() :th.charAt(0).toUpperCase() + th.slice(1),\n                accessor: th,\n              };\n            }),\n          },\n        ];\n      };\n\n   //Fomat data to display as summary   \n   const formatSummaryData = (data:any)=> {\n        return data.map((entry:any) => ({ id: entry.id, title: entry.attributes.titles[0].title}))\n   }\n\n   \n   //Format data to display as content\n   const formatContentData= (data:any)   => {\n      return {\n      \"Publication Year\" : data[selectedDataIndex].attributes.publicationYear, \n      Publisher: data[selectedDataIndex].attributes.publisher,\n      Subjects: data[selectedDataIndex].attributes.subjects.map((val:any)=>val[\"subject\"]),\n      URL : data[selectedDataIndex].attributes.url}\n   }\n\n   //Create content\n   const prepareContent = (data:any) => {\n     if(selectedDataIndex >= 0 )\n     {\n      const formattedData = formatContentData(data);\n      const detailsArray : any [] =[];\n      for (const [k, v] of Object.entries(formattedData)) {\n        detailsArray.push([k,v]);\n      }\n      return (\n      <ul>\n        {\n            detailsArray.map((row,indx) => {\n              return (\n              <li>\n                <h2>{row[0]} </h2>\n                <ul>\n                    { Array.isArray(row[1])\n                       ? row[1].map(val=><li>{val}</li>) \n                       : indx===detailsArray.length-1 ? \n                         <li>\n                           <a href={row[1]}>\n                             {row[1]}\n                           </a>\n                         </li> \n                       : <li>{row[1]}</li>}\n                </ul>\n              </li> )\n            })\n        }\n      </ul>)\n     }\n     else\n     return \"\";\n    \n   }\n   //Handle selection in summary table   \n   const handleTableRowClick = (indx:number) => {\n    setSelectedDataIndex(indx);\n   }\n\n   return (\n    <Aux>\n        \n        {loading?\n        <>\n         <div className= {classes.ContainerText}>\n              Loading\n          </div>\n         <div className={classes.Loader}>\n         </div>\n        </> \n        : ccdData.length>0 \n        ? \n        Object.keys(error).length!== 0 ?\n          <div> Error while fetching data</div>\n        : <div className= {classes.Conatiner}>\n            <div className = {classes.Left} > \n                <Table \n                  columns={prepareSummaryTableColumns()} \n                  data={formatSummaryData(ccdData)} \n                  selectedRow={0} \n                  pageIndexValue ={0} \n                  pageSizeValue={20} \n                  onRowClick={handleTableRowClick}\n                  /> \n            </div> \n            <div className = {classes.Right} >\n            <InfoBox title={\"Details\"}>{prepareContent(ccdData)}</InfoBox>\n                  \n            </div>   \n        </div>\n        : \"\" }\n    </Aux>\n    )\n}\n\n\n"]},"metadata":{},"sourceType":"module"}