{"ast":null,"code":"import _toConsumableArray from\"/Users/seenanair/Desktop/Personal/INTERVIEW/DEMO/ThoughtRiver/contract-viewer-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/seenanair/Desktop/Personal/INTERVIEW/DEMO/ThoughtRiver/contract-viewer-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import ParagraphComponent from'../../Components/ParagraphComponent/ParagraphComponent';import{useFetch}from'../../hooks/useFetch';//import Wrapper from '../../utils/Wrapper';\nimport classes from'./ContractParagraphDisplay.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";var ContractParagraphDisplay=function ContractParagraphDisplay(_ref){var paragraphURL=_ref.paragraphURL;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),paragraphData=_useState2[0],setParagraphData=_useState2[1];var _React$useState=React.useState(1),_React$useState2=_slicedToArray(_React$useState,2),paragraphNumber=_React$useState2[0],setParagraphNumber=_React$useState2[1];var baseURL=\"http://localhost:3000\";var componentRef=React.useRef(null);var _useFetch=useFetch(\"\".concat(baseURL).concat(paragraphURL,\"?page=\").concat(paragraphNumber,\"&pageSize=50\")),data=_useFetch.data,loading=_useFetch.loading,error=_useFetch.error;React.useEffect(function(){var handleResize=function handleResize(){fillParagraphsOnEmptySpace();};var handleScroll=function handleScroll(){// Check whether end of the document reached\nif(componentRef.current&&Math.abs(componentRef.current.getBoundingClientRect().bottom-window.innerHeight)<100)setParagraphNumber(function(prev){return prev+1;});};window.addEventListener('scroll',handleScroll,true);window.addEventListener(\"resize\",handleResize);//Clean up\nreturn function(){window.removeEventListener('scroll',handleScroll,true);window.removeEventListener(\"resize\",handleResize);};},[]);var fillParagraphsOnEmptySpace=function fillParagraphsOnEmptySpace(){//fetch paragraphs until the display window displays scroll bar\nif(componentRef.current&&window.innerHeight>componentRef.current.scrollHeight)setParagraphNumber(function(prev){return prev+1;});};React.useEffect(function(){if(loading||error)return;if(Object.keys(data).length!==0&&\"data\"in data)setParagraphData(function(prevState){return[].concat(_toConsumableArray(prevState),[data]);});},[data,loading,error]);React.useEffect(function(){if(paragraphData.length===0)return;fillParagraphsOnEmptySpace();},[paragraphData]);return/*#__PURE__*/_jsx(\"div\",{className:classes.fullscreenDiv,ref:componentRef,\"data-testid\":\"contract-paragraphs\",children:paragraphData.map(function(val){return/*#__PURE__*/_jsx(ParagraphComponent,{content:val.data.attributes.text?val.data.attributes.text:\"\"});})});};export default ContractParagraphDisplay;","map":{"version":3,"sources":["/Users/seenanair/Desktop/Personal/INTERVIEW/DEMO/ThoughtRiver/contract-viewer-app/src/pages/Display/ContractParagraphDisplay.tsx"],"names":["React","useState","ParagraphComponent","useFetch","classes","ContractParagraphDisplay","paragraphURL","paragraphData","setParagraphData","paragraphNumber","setParagraphNumber","baseURL","componentRef","useRef","data","loading","error","useEffect","handleResize","fillParagraphsOnEmptySpace","handleScroll","current","Math","abs","getBoundingClientRect","bottom","window","innerHeight","prev","addEventListener","removeEventListener","scrollHeight","Object","keys","length","prevState","fullscreenDiv","map","val","attributes","text"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport  ParagraphComponent  from '../../Components/ParagraphComponent/ParagraphComponent';\nimport { useFetch } from '../../hooks/useFetch';\n//import Wrapper from '../../utils/Wrapper';\nimport classes from './ContractParagraphDisplay.module.css';\n\n\n const ContractParagraphDisplay = ({paragraphURL} : {paragraphURL: string}) => {\n    const [paragraphData, setParagraphData] = useState<any>([]);\n    const [paragraphNumber,setParagraphNumber] = React.useState(1);\n    const baseURL = \"http://localhost:3000\"\n    const componentRef = React.useRef<HTMLDivElement>(null);\n   \n    \n    const {data,loading,error} = useFetch(`${baseURL}${paragraphURL}?page=${paragraphNumber}&pageSize=50`) \n   \n    React.useEffect(()=> {\n        \n        const handleResize = () => {\n            fillParagraphsOnEmptySpace()\n        }\n        const handleScroll = () => {\n            // Check whether end of the document reached\n           if(componentRef.current && Math.abs(componentRef.current.getBoundingClientRect().bottom-window.innerHeight)<100)\n              setParagraphNumber((prev)=>prev+1);\n        }\n        window.addEventListener('scroll', handleScroll,true);\n        window.addEventListener(\"resize\", handleResize);\n\n        //Clean up\n        return(()=> {\n            window.removeEventListener('scroll',handleScroll,true);\n            window.removeEventListener(\"resize\", handleResize);\n        })\n    },[])\n\n    const fillParagraphsOnEmptySpace = () => {\n        //fetch paragraphs until the display window displays scroll bar\n        if(componentRef.current && window.innerHeight > componentRef.current.scrollHeight)\n           setParagraphNumber(prev=>prev+1);\n   }\n    \n    React.useEffect(()=> {\n        if(loading || error)\n          return;\n        if(Object.keys(data).length!==0 && \"data\" in data)\n          setParagraphData((prevState:any) => [...prevState, data] );\n    },[data, loading,error])\n     \n   \n    React.useEffect(()=> {\n        if(paragraphData.length ===0)\n            return;\n        fillParagraphsOnEmptySpace();\n    },[paragraphData])\n\n    \n    \n    return (\n            <div className={classes.fullscreenDiv} ref = {componentRef} data-testid=\"contract-paragraphs\">\n                {paragraphData.map((val:any) => \n                    <ParagraphComponent content={val.data.attributes.text?val.data.attributes.text:\"\"}/>\n                )}\n            </div>\n    );\n};\n\nexport default ContractParagraphDisplay;"]},"metadata":{},"sourceType":"module"}