{"ast":null,"code":"var _jsxFileName = \"/Users/seenanair/Desktop/CCDC_Demo/ccdc-app/src/DataBuilder/DataBuilder.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { InfoBox } from \"../Components/InfoBox/InfoBox\";\nimport { Table } from \"../Components/Table/Table\";\nimport Aux from \"../hoc/Aux\";\nimport { useFetch } from \"../hooks/useFetch\";\nimport classes from \"./DataBuilder.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const DataBuilder = () => {\n  _s();\n\n  const [selectedDataIndex, setSelectedDataIndex] = React.useState(0); //Custom hook to fetch data\n\n  const {\n    data,\n    loading,\n    error\n  } = useFetch(`https://api.test.datacite.org/dois?query=prefix:10.5517`);\n\n  const getData = data => {\n    if (data && data.data && data.data.length > 0) return data.data;else return [];\n  };\n\n  const ccdData = React.useMemo(() => getData(data), [data]); //Create table structure \n\n  const prepareSummaryTableColumns = () => {\n    return [{\n      Header: () => \"Summary\",\n      id: \"axes-header\",\n      columns: [\"id\", \"title\"].map((th, idx) => {\n        return {\n          Header: idx === 0 ? th.toUpperCase() : th.charAt(0).toUpperCase() + th.slice(1),\n          accessor: th\n        };\n      })\n    }];\n  }; //Fomat data to display as summary   \n\n\n  const formatSummaryData = data => {\n    return data.map(entry => ({\n      id: entry.id,\n      title: entry.attributes.titles[0].title\n    }));\n  }; //Format data to display as content\n\n\n  const formatContentData = data => {\n    return {\n      \"Publication Year\": data[selectedDataIndex].attributes.publicationYear,\n      Publisher: data[selectedDataIndex].attributes.publisher,\n      Subjects: data[selectedDataIndex].attributes.subjects.map(val => val[\"subject\"]),\n      URL: data[selectedDataIndex].attributes.url\n    };\n  }; //Create content\n\n\n  const prepareContent = data => {\n    if (selectedDataIndex >= 0) {\n      const formattedData = formatContentData(data);\n      const detailsArray = [];\n\n      for (const [k, v] of Object.entries(formattedData)) {\n        detailsArray.push([k, v]);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: detailsArray.map((row, indx) => {\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: [row[0], \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              children: Array.isArray(row[1]) ? row[1].map(val => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: val\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 42\n              }, this)) : indx === detailsArray.length - 1 ? /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: row[1],\n                  children: row[1]\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 28\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 26\n              }, this) : /*#__PURE__*/_jsxDEV(\"li\", {\n                children: row[1]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 26\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 7\n      }, this);\n    } else return \"\";\n  }; //Handle selection in summary table   \n\n\n  const handleTableRowClick = indx => {\n    setSelectedDataIndex(indx);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Aux, {\n    children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.Loader\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 10\n      }, this)\n    }, void 0, false) : ccdData.length > 0 ? Object.keys(error).length !== 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \" Error while fetching data\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.Conatiner,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.Left,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          columns: prepareSummaryTableColumns(),\n          data: formatSummaryData(ccdData),\n          selectedRow: 0,\n          pageIndexValue: 0,\n          pageSizeValue: 20,\n          onRowClick: handleTableRowClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.Right,\n        children: /*#__PURE__*/_jsxDEV(InfoBox, {\n          title: \"Details\",\n          children: prepareContent(ccdData)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }, this) : \"\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n\n_s(DataBuilder, \"JaTF3cdXphT2r5nKgu/DhKiKsXc=\", false, function () {\n  return [useFetch];\n});\n\n_c = DataBuilder;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataBuilder\");","map":{"version":3,"sources":["/Users/seenanair/Desktop/CCDC_Demo/ccdc-app/src/DataBuilder/DataBuilder.tsx"],"names":["React","InfoBox","Table","Aux","useFetch","classes","DataBuilder","selectedDataIndex","setSelectedDataIndex","useState","data","loading","error","getData","length","ccdData","useMemo","prepareSummaryTableColumns","Header","id","columns","map","th","idx","toUpperCase","charAt","slice","accessor","formatSummaryData","entry","title","attributes","titles","formatContentData","publicationYear","Publisher","publisher","Subjects","subjects","val","URL","url","prepareContent","formattedData","detailsArray","k","v","Object","entries","push","row","indx","Array","isArray","handleTableRowClick","Loader","keys","Conatiner","Left","Right"],"mappings":"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","sourcesContent":["\n\nimport React from \"react\";\nimport { InfoBox } from \"../Components/InfoBox/InfoBox\";\nimport { Table } from \"../Components/Table/Table\";\nimport Aux from \"../hoc/Aux\";\nimport { useFetch } from \"../hooks/useFetch\";\nimport classes from \"./DataBuilder.module.css\"\n\n\nexport const DataBuilder = () => {\n\n  const [selectedDataIndex,setSelectedDataIndex] = React.useState(0);\n\n  //Custom hook to fetch data\n  const {data,loading,error} =   useFetch(`https://api.test.datacite.org/dois?query=prefix:10.5517`);\n\n  \n  const getData = (data:any) : [] => {\n    if(data && data.data && data.data.length>0)\n      return data.data;\n    else\n      return [];  \n  }\n\n  const ccdData = React.useMemo(() => getData(data),[data]);\n\n  //Create table structure \n  const prepareSummaryTableColumns = () => {\n        return [\n          {\n            Header: () => \"Summary\",\n            id: \"axes-header\",\n            columns: [\"id\", \"title\"].map((th, idx) => {\n              return {\n                Header: idx===0?th.toUpperCase() :th.charAt(0).toUpperCase() + th.slice(1),\n                accessor: th,\n              };\n            }),\n          },\n        ];\n      };\n\n   //Fomat data to display as summary   \n   const formatSummaryData = (data:any)=> {\n        return data.map((entry:any) => ({ id: entry.id, title: entry.attributes.titles[0].title}))\n   }\n\n   \n   //Format data to display as content\n   const formatContentData= (data:any)   => {\n      return {\n      \"Publication Year\" : data[selectedDataIndex].attributes.publicationYear, \n      Publisher: data[selectedDataIndex].attributes.publisher,\n      Subjects: data[selectedDataIndex].attributes.subjects.map((val:any)=>val[\"subject\"]),\n      URL : data[selectedDataIndex].attributes.url}\n   }\n\n   //Create content\n   const prepareContent = (data:any) => {\n     if(selectedDataIndex >= 0 )\n     {\n      const formattedData = formatContentData(data);\n      const detailsArray : any [] =[];\n      for (const [k, v] of Object.entries(formattedData)) {\n        detailsArray.push([k,v]);\n      }\n      return (\n      <ul>\n        {\n            detailsArray.map((row,indx) => {\n              return (\n              <li>\n                <h2>{row[0]} </h2>\n                <ul>\n                    { Array.isArray(row[1])\n                       ? row[1].map(val=><li>{val}</li>) \n                       : indx===detailsArray.length-1 ? \n                         <li>\n                           <a href={row[1]}>\n                             {row[1]}\n                           </a>\n                         </li> \n                       : <li>{row[1]}</li>}\n                </ul>\n              </li> )\n            })\n        }\n      </ul>)\n     }\n     else\n     return \"\";\n    \n   }\n   //Handle selection in summary table   \n   const handleTableRowClick = (indx:number) => {\n    setSelectedDataIndex(indx);\n   }\n\n   return (\n    <Aux>\n        \n        {loading?\n        <>\n         <div className={classes.Loader}>\n         </div>\n        </> \n        : ccdData.length>0 \n        ? \n        Object.keys(error).length!== 0 ?\n          <div> Error while fetching data</div>\n        : <div className= {classes.Conatiner}>\n            <div className = {classes.Left} > \n                <Table \n                  columns={prepareSummaryTableColumns()} \n                  data={formatSummaryData(ccdData)} \n                  selectedRow={0} \n                  pageIndexValue ={0} \n                  pageSizeValue={20} \n                  onRowClick={handleTableRowClick}\n                  /> \n            </div> \n            <div className = {classes.Right} >\n            <InfoBox title={\"Details\"}>{prepareContent(ccdData)}</InfoBox>\n                  \n            </div>   \n        </div>\n        : \"\" }\n    </Aux>\n    )\n}\n\n\n"]},"metadata":{},"sourceType":"module"}