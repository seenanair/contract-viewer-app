{"ast":null,"code":"var _jsxFileName = \"/Users/seenanair/Desktop/Personal/INTERVIEW/DEMO/ThoughtRiver/case-details-app/src/pages/Display/ContractParagraphDisplay.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { ParagraphComponent } from '../../Components/InfoBox/ParagraphComponent'; //import Wrapper from '../../utils/Wrapper';\n\nimport classes from './ContractParagraphDisplay.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ContractParagraphDisplay = ({\n  paragraphURL\n}) => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [paragraphData, setParaGraphData] = useState([]);\n  const [caseData, setCaseData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState({});\n  const [paragraphNumber, setParagraphNumber] = React.useState(1);\n  const baseURL = \"http://localhost:3000\";\n  const componentRef = React.useRef(null);\n\n  const fetchData = async apiUrl => {\n    try {\n      fetch(apiUrl).then(res => {\n        return res.json();\n      }).then(data => {\n        setParaGraphData(prevState => [...prevState, data]);\n        setLoading(false);\n      }).catch(error => {\n        setError(error);\n        setLoading(false);\n      });\n    } catch (err) {\n      setError(err);\n      setLoading(false);\n    }\n  };\n\n  React.useEffect(() => {\n    window.addEventListener('scroll', infiniteScroll);\n  }, []);\n  React.useEffect(() => {\n    if (paragraphNumber <= 0) return;\n    const paraGraphURL = `${baseURL}${paragraphURL}?page=${paragraphNumber}&pageSize=50`;\n    fetchData(paraGraphURL);\n    if (!componentRef) return;\n    if (componentRef.current && window.innerHeight <= componentRef.current.scrollTop) if (window.scrollbars.visible) {\n      console.log(\"test\");\n    }\n  }, [paragraphNumber, id, paragraphURL]);\n  React.useEffect(() => {});\n\n  const displayParagraphs = () => {\n    return paragraphData.map(val => /*#__PURE__*/_jsxDEV(ParagraphComponent, {\n      content: val.data.attributes.text ? val.data.attributes.text : \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this));\n  };\n\n  const infiniteScroll = () => {\n    // End of the document reached?\n    if (window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight) {\n      setParagraphNumber(prev => prev + 1);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.fullscreenDiv,\n    ref: componentRef,\n    children: paragraphData.length > 0 && displayParagraphs()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 13\n  }, this);\n};\n\n_s(ContractParagraphDisplay, \"53wQYuSZwPGbS9QsHdZqFTh0I60=\", false, function () {\n  return [useParams];\n});\n\n_c = ContractParagraphDisplay;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContractParagraphDisplay\");","map":{"version":3,"sources":["/Users/seenanair/Desktop/Personal/INTERVIEW/DEMO/ThoughtRiver/case-details-app/src/pages/Display/ContractParagraphDisplay.tsx"],"names":["React","useState","useParams","ParagraphComponent","classes","ContractParagraphDisplay","paragraphURL","id","paragraphData","setParaGraphData","caseData","setCaseData","loading","setLoading","error","setError","paragraphNumber","setParagraphNumber","baseURL","componentRef","useRef","fetchData","apiUrl","fetch","then","res","json","data","prevState","catch","err","useEffect","window","addEventListener","infiniteScroll","paraGraphURL","current","innerHeight","scrollTop","scrollbars","visible","console","log","displayParagraphs","map","val","attributes","text","document","documentElement","offsetHeight","prev","fullscreenDiv","length"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { ParagraphComponent } from '../../Components/InfoBox/ParagraphComponent';\n//import Wrapper from '../../utils/Wrapper';\nimport classes from './ContractParagraphDisplay.module.css';\n\nexport const ContractParagraphDisplay = ({paragraphURL} : {paragraphURL: string}) => {\n    const { id } = useParams<{ id: string }>();\n    const [paragraphData, setParaGraphData] = useState<any>([]);\n    const [caseData, setCaseData] = useState<any>({});\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState({});\n    const [paragraphNumber,setParagraphNumber] = React.useState(1);\n    const baseURL = \"http://localhost:3000\"\n    const componentRef = React.useRef<HTMLDivElement>(null);\n\n    const fetchData = async(apiUrl:string) => {\n        try {\n            fetch(apiUrl)\n                .then((res) => {\n                    return res.json()\n                })\n                .then((data) => {\n                    setParaGraphData((prevState:any) => [...prevState, data] );\n                    setLoading(false);\n                }).catch(error => {\n                    setError(error);\n                    setLoading(false);\n                });\n        } catch (err) {\n            setError(err);\n            setLoading(false);\n        }\n    }\n    React.useEffect(()=> {\n        window.addEventListener('scroll', infiniteScroll);\n    },[])\n     \n    React.useEffect(()=> {\n        if(paragraphNumber<=0)\n        return;\n        const paraGraphURL= `${baseURL}${paragraphURL}?page=${paragraphNumber}&pageSize=50`\n        fetchData(paraGraphURL);\n        if(!componentRef)\n         return;\n        if(componentRef.current && window.innerHeight <= componentRef.current.scrollTop)\n        if(window.scrollbars.visible)\n        {\n            console.log(\"test\");\n        }\n    },[paragraphNumber, id, paragraphURL])\n    \n    React.useEffect(()=> {\n\n    })\n    const displayParagraphs = ()=> {\n        return  paragraphData.map((val:any)=> \n            <ParagraphComponent content={val.data.attributes.text?val.data.attributes.text:\"\"}/>\n        )   \n    }\n    const infiniteScroll = () => {\n        // End of the document reached?\n        if (window.innerHeight + document.documentElement.scrollTop === document.documentElement.offsetHeight)\n        { setParagraphNumber((prev)=>prev+1);\n        }\n    }\n    \n    return (\n    \n            <div className={classes.fullscreenDiv} ref = {componentRef}>\n                {paragraphData.length>0 && displayParagraphs()}\n            </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}